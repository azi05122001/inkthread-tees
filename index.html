<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>InkThread Tees | Custom Printed T-Shirts</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <style>
    /* Existing styles... */

    .delivery-form {
      margin: 2rem 0;
      padding: 1.5rem;
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    .delivery-form h2 {
      margin-bottom: 1rem;
      font-size: 1.5rem;
    }

    .delivery-form label {
      display: block;
      margin-top: 1rem;
      font-weight: 600;
    }

    .delivery-form input {
      width: 100%;
      padding: 0.8rem;
      margin-top: 0.5rem;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 1rem;
    }

    .delivery-form button {
      margin-top: 1.5rem;
      padding: 0.8rem 2rem;
      background: var(--primary);
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 1.1rem;
      cursor: pointer;
      transition: background 0.3s ease;
    }

    .delivery-form button:hover {
      background: var(--accent);
    }

    .shipping-info {
      margin-top: 2rem;
      font-size: 1.1rem;
      font-weight: 600;
    }

    .shipping-info p {
      margin: 0.5rem 0;
    }
  </style>
</head>
<body>

<!-- Existing header, navigation, and product sections... -->

<section class="delivery-form">
  <h2>Enter Delivery Address</h2>
  <form id="delivery-form">
    <label for="name">Full Name</label>
    <input type="text" id="name" required />

    <label for="email">Email Address</label>
    <input type="email" id="email" required />

    <label for="address">Street Address</label>
    <input type="text" id="address" required />

    <label for="city">City</label>
    <input type="text" id="city" required />

    <label for="state">State</label>
    <input type="text" id="state" required />

    <label for="pincode">PIN Code</label>
    <input type="text" id="pincode" required pattern="\d{6}" title="Enter a valid 6-digit PIN code" />

    <button type="submit">Calculate Shipping</button>
  </form>

  <div id="shipping-info" class="shipping-info"></div>
</section>

<!-- Existing checkout section... -->

<script>
  // Existing cart and price data...

  // Function to calculate shipping cost based on PIN code
  function calculateShipping(pincode) {
    // Define India Post Speed Post rates based on distance
    const rates = {
      local: { maxDistance: 50, rate: 15 },
      upTo200Km: { maxDistance: 200, rate: 35 },
      upTo1000Km: { maxDistance: 1000, rate: 35 },
      upTo2000Km: { maxDistance: 2000, rate: 35 },
      above2000Km: { maxDistance: Infinity, rate: 35 }
    };

    // Example: Mapping PIN codes to distances (in km)
    const pinCodeDistances = {
      '700001': 5,    // Kolkata
      '110001': 150,  // Delhi
      '500001': 700,  // Hyderabad
      '600001': 1200, // Chennai
      '400001': 2500  // Mumbai
    };

    const distance = pinCodeDistances[pincode] || 0;
    let shippingCost = 0;

    if (distance <= rates.local.maxDistance) {
      shippingCost = rates.local.rate;
    } else if (distance <= rates.upTo200Km.maxDistance) {
      shippingCost = rates.upTo200Km.rate;
    } else if (distance <= rates.upTo1000Km.maxDistance) {
      shippingCost = rates.upTo1000Km.rate;
    } else if (distance <= rates.upTo2000Km.maxDistance) {
      shippingCost = rates.upTo2000Km.rate;
    } else {
      shippingCost = rates.above2000Km.rate;
    }

    return shippingCost;
  }

  // Handle delivery form submission
  document.getElementById('delivery-form').addEventListener('submit', function(e) {
    e.preventDefault();

    const pincode = document.getElementById('pincode').value.trim();

    if (!pincode || pincode.length !== 6 || !/^\d{6}$/.test(pincode)) {
      alert('Please enter a valid 6-digit PIN code.');
      return;
    }

    const shippingCost = calculateShipping(pincode);
    const totalAmount = Object.keys(cart).reduce((sum, id) => sum + cart[id] * prices[id], 0);
    const grandTotal = totalAmount + shippingCost;

    document.getElementById('shipping-info').innerHTML = `
      <p>Shipping Cost for PIN Code ${pincode}: ₹${shippingCost}</p>
      <p>Total Amount: ₹${totalAmount.toFixed(2)}</p>
      <p><strong>Grand Total: ₹${grandTotal.toFixed(2)}</strong></p>
    `;
  });
</script>

</body>
</html>
